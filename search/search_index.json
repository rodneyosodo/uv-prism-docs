{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Prism","text":"<p>Prism is a web based SAAS that is intended for use by the end user, to allow for a user in an project to benefit from the entire CoCoS AI system. Prism adds a layer of security and user management to the CoCoS AI system by providing functionality such as:</p> <ul> <li>User and Consortium (project) creation and management</li> <li>Policy creation and management (between users, projects, and computations)</li> <li>Billing and payment management</li> <li>Computation creation and management</li> </ul>"},{"location":"#what-is-prism-ai","title":"What is Prism AI","text":"<p>Prism AI is a platform designed for secure, confidential AI workloads using Trusted Execution Environments (TEEs). It enables secure VM provisioning, fine-grained access control, and end-to-end encryption to ensure data privacy in collaborative AI projects. The platform supports various computational backends and includes logging, monitoring, and a user-friendly interface. It\u2019s particularly useful in sectors like healthcare, finance, and government for secure data processing and collaboration. More details can be found on the Prism AI page.</p> <p></p>"},{"location":"#features","title":"Features","text":"<p>Prism AI offers several key features:</p> <ol> <li>Secure VM Provisioning: Uses Trusted Execution Environments (TEEs) for secure workloads.</li> <li>Fine-Grained Access Control: Allows precise management of user and data permissions.</li> <li>End-to-End Encryption: Ensures data privacy from input to output.</li> <li>Support for Multiple Backends: Integrates with various computational backends.</li> <li>Logging and Monitoring: Provides comprehensive tracking and auditing capabilities.</li> <li>User-Friendly Interface: Simplifies complex AI workflow management.</li> </ol> <p>These features make it ideal for sensitive industries like healthcare, finance, and government. For more details, visit the Prism AI page.</p>"},{"location":"architecture/","title":"Architecture","text":"<p>Prism provides a computation management service for CoCos AI.</p>"},{"location":"architecture/#components","title":"Components","text":"Service Description Auth Manages user policies in relation to backends, certs and computations. Users Manages platform's users and auth concerns in regards to users and projects. Computations Manages computation lifecycle, from creation to running and monitoring. Backends Manages connections to manager allowing running of computations on CoCos within secure enclaves. Certs Manages certification lifecyle (issuing, revocation, renewal) used for mTLS between backends and manager. Billing Manages payments on the platform and controls resource access based on billing plans. Invitations Manages user inivations to access projects. User Interface Provides an web interface to provide platform access over a visual interface."},{"location":"architecture/#users","title":"Users","text":"<p>The users service provides users access to the plaform and the user identities are used to provide authorization for the platform. Prism uses magistrala users service to achieve this.</p>"},{"location":"architecture/#computations","title":"Computations","text":"<p>The computations service give users with the appropriate authorization, the ability to create, update, delete and run computations.</p>"},{"location":"architecture/#backends","title":"Backends","text":"<p>The backends service connects to the computations service and receives run requests from computations service which it forwards to manager service. Backends are identified by their ip addresses and have certificates assigned to them for mutual TLS connections with manager.</p>"},{"location":"architecture/#certs","title":"Certs","text":"<p>This a certificate authority service that offers the ability to issue, revoke, renew certificates. It also offers an online certificate status protocal <code>OCSP</code> endpoint which is used to verify certificates used in backends service.</p>"},{"location":"architecture/#user-interface","title":"User Interface","text":"<p>This provides users with a web interface to visually access the platform. It connects to the other services using the sdk.</p>"},{"location":"backends/","title":"Backends Service","text":"<p>The backends service provides a means to manage backends which is where computations run. The service allows the creation, update, viewing and deletion of a backend. The service also manages connections to different backends and monitors them as well as securing the connection with mutual TLS. The service also enables the termination of the manager service running on the backend.</p> <p>A backend can be described as consisting on manager running on the host, along with agent in a virtual machine in a Trusted Execution Environment.</p> <p></p>"},{"location":"backends/#creating-a-backend","title":"Creating a Backend","text":"<p>This can be done on the user interface as below:</p> <p></p> <p>or by running:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/backends -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"my dell server\",\n  \"description\": \"\",\n  \"address\": \"192.168.100.4\"\n}\nEOF\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nLocation: /backends/fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5\nDate: Thu, 02 May 2024 10:15:35 GMT\nContent-Length: 0\n</code></pre>"},{"location":"backends/#updating-backend","title":"Updating backend","text":"<p>This can be done on the user interface:</p> <p></p> <p>or on curl:</p> <pre><code>curl -sSiX PUT https://prism.ultraviolet.rs/backends/&lt;backend_id&gt; -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"my dell server\",\n  \"description\": \"new description\",\n  \"address\": \"192.168.100.4\"\n}\nEOF\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 20:14:22 GMT\nContent-Length: 0\n</code></pre>"},{"location":"backends/#listing-backends","title":"Listing Backends","text":"<p>List of backends is viewable on the ui:</p> <p></p> <p>This can be done on curl as shown below:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/backends -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 20:17:03 GMT\nContent-Length: 165\n\n{\"total\":1,\"limit\":10,\"backends\":[{\"id\":\"ca219243-0dd4-4e6e-94ad-54fbf3dd8b32\",\"name\":\"my dell server\",\"description\":\"some description\",\"address\":\"192.168.100.4\"}]}\n</code></pre>"},{"location":"backends/#view-backend","title":"View Backend","text":"<p>An individual backend can be viewed on ui where it's details such as address, status, ID, certs and information can be acquired. Certs management is also carried out on this page.</p> <p></p> <p>This can be done on curl as below:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/backends/&lt;backend_id&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 20:19:14 GMT\nContent-Length: 129\n\n{\"id\":\"ca219243-0dd4-4e6e-94ad-54fbf3dd8b32\",\"name\":\"my dell server\",\"description\":\"some description\",\"address\":\"192.168.100.4\"}\n</code></pre>"},{"location":"backends/#view-backend-information","title":"View Backend Information","text":"<p>For a SEV enabled backend, the backend information can be viewed using prism. This information is measured by a Rust script found here. Once compiled and the binary is stored in <code>/build</code>, the backend information can be measured by Prism as shown below.</p> <p>On the backend page, click the Backend Information button: </p> <p>If the measurement binary is absent and no measurement is found, an empty measurement file is displayed:</p> <p></p> <p>If the measurement is present or measurement is found in the db, the measurement file will be available for download.</p> <p></p> <p>The backend_info.json file is useful in cocos for attested TLS, and can be used to verify attestation report. The file is provided to cocos-cli which can add measurement data or host data. The file contains the SnpPolicy and RootOfTrust as shown:</p> <pre><code>{\n  \"snp_policy\": {\n    \"policy\": 1966081,\n    \"family_id\": \"AA==\",\n    \"image_id\": \"AA==\",\n    \"vmpl\": {\n      \"value\": 0\n    },\n    \"minimum_tcb\": 1506397780360888800,\n    \"minimum_launch_tcb\": 1506397780360888800,\n    \"require_author_key\": false,\n    \"measurement\": \"AA==\",\n    \"host_data\": \"AA==\",\n    \"report_id_ma\": \"AA==\",\n    \"chip_id\": \"GrFqQtRklrsjBslu9pcQ6X4rkftFW1Ar1oT+I4guQ1sVC6qakgSvEtE4P/SLSJ6mHNp0kY0mHnGpvz1Ov+k/w==\",\n    \"minimum_build\": 7,\n    \"minimum_version\": \"1.55\",\n    \"permit_provisional_firmware\": false,\n    \"require_id_block\": false\n  },\n  \"root_of_trust\": {\n    \"product\": \"Milan\",\n    \"check_crl\": true,\n    \"disallow_network\": false\n  }\n}\n</code></pre>"},{"location":"backends/#terminate-backend","title":"Terminate Backend","text":"<p>This is used to disconnect and close the associated backend connection. This is usually triggered when a certificate is revoked while the backend is connected using this certificate or user initiated for any reason. Please note that this action will stop all ongoing computations and stop manager and any running agent.</p> <p>Manual backend termination can not be done directly on ui, but can be done using the HTTP API:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/backends/terminate/&lt;backend_id&gt;/&lt;termination_type&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Termination trype is an integer:</p> <ul> <li>0 - Certificate revokation</li> <li>1 - User initiated termination</li> </ul> <p>response:</p> <pre><code>HTTP/1.1 204 No Content\nContent-Type: application/json\nDate: Fri, 03 May 2024 20:41:29 GMT\n</code></pre> <p>On manager the logs will be as follows:</p> <pre><code>{\"time\":\"2024-05-03T23:41:29.664410497+03:00\",\"level\":\"ERROR\",\"msg\":\"manager service terminated: server requested client termination\\nBackend Closed\"}\n{\"time\":\"2024-05-03T23:41:29.671347637+03:00\",\"level\":\"ERROR\",\"msg\":\"Error shutting down tracer provider: context canceled\"}\n</code></pre>"},{"location":"backends/#delete-backend","title":"Delete Backend","text":"<p>This removes the backend from the database. This can be done by clicking the delete button on the backend's page as shown:</p> <p></p> <p>Alternatively, the backend can be deleted on the backends list page by clicking the trash icon: </p> <p>This can be done on curl as shown below:</p> <pre><code>curl -sSiX DELETE https://prism.ultraviolet.rs/backends/&lt;backend_id&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Response:</p> <pre><code>HTTP/1.1 204 No Content\nContent-Type: application/json\nDate: Fri, 03 May 2024 20:46:09 GMT\n</code></pre>"},{"location":"billing/","title":"Billing service","text":"<p>The billing service allows the project to pay for the services used in the CoCoS system such as total number of computations, total users, and the use rate. Once a billing customer is created, the billing service allows the user to select a plan out of the ones created by the admin and make payments for these plans based on the selected plan.</p>"},{"location":"billing/#billing-metrics","title":"Billing Metrics","text":"<p>Billing plans are designed for flexibility to accommodate different projects needs such as number of computations, workspace members and computation runs. This allows choice for a plan that best fits current projects needs and can easily scale up as needed.</p>"},{"location":"billing/#customer-functions","title":"Customer Functions","text":""},{"location":"billing/#list-plans","title":"List Plans","text":"<p>In order to list plans, the following steps need to be followed: On the UI the steps are as follows:</p> <ol> <li>Click on 'Billing' on the side navigation to view the plans.    </li> </ol>"},{"location":"billing/#create-customer","title":"Create Customer","text":"<p>This function allows for the creation of a new customer account with the billing service. A billing customer is required to perform all billing operations and is created from the billing page as shown below.</p> <p>Once you click the create billing customer, the customer details are required in order to successfully create the plan. On the UI the steps are as follows:</p> <ol> <li>Click on 'Billing' on the side navigation, then click 'Create'    </li> <li>On the dialog that pops up, fill in the required details.    </li> </ol>"},{"location":"billing/#update-billing-customer","title":"Update Billing Customer","text":"<p>This function updates the details of an existing customer account.</p> <p>On the UI the steps are as follows:</p> <ol> <li>Click on 'Billing' on the side navigation, then click 'Update Customer Details'    </li> <li>On the dialog that pops up, fill in the required details and click 'Update'.    </li> </ol>"},{"location":"billing/#subscription-functions","title":"Subscription Functions","text":""},{"location":"billing/#create-subscription","title":"Create Subscription","text":"<p>Once a billing customer has been created, the plans created will be visible. On the billing page, the plan cards will be visible as shown below:</p> <p></p> <p>To subscribe to a plan, click the select subscription button which will create a subscription to the selected plan.</p>"},{"location":"billing/#checkout","title":"Checkout","text":"<p>When the select subscription button is clicked, you will be redirected to the checkout page where your payment details will be required for the payment to be made.</p> <p>On the UI the steps are as follows:</p> <ol> <li>Click on 'Billing' on the side navigation, then click 'Select Subscription' on any of plans    </li> <li>On the checkout page, fill in your information and submit to check out.    </li> </ol>"},{"location":"billing/#update-payment-details","title":"Update Payment Details","text":"<p>The payment details of the current session are stored, and these can be changed by clicking the update payment details button as shown below:</p> <p></p>"},{"location":"certs/","title":"Certs Service","text":"<p>The certs service is a certificate authority used to issue certs related to backends service for mutual TLS purposes. The certs service provides the ability to issue, renew, revoke and download certificates.</p>"},{"location":"certs/#issue-a-certificate","title":"Issue a Certificate","text":"<p>This is the creation of a certificate associated with a specific backend.</p> <p>This can be done on the UI on the specific backend page, by clicking on issue cert button. </p> <p>This can be done on curl using:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/certs/issue/backend/&lt;backend_id&gt; -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"ip_addresses\": []\n}\nEOF\n</code></pre> <p>example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/certs/issue/backend/fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5 -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"ip_addresses\": [\"192.168.100.4\"]\n}\nEOF\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nDate: Thu, 02 May 2024 11:35:37 GMT\nContent-Length: 59\n\n{\"serial_number\":\"75709155906162784911683514578929321876\"}\n</code></pre>"},{"location":"certs/#download-a-certificate","title":"Download a Certificate","text":"<p>This is a two step process. First we'll obtain a short lived token. Then using this token we'll be able to download the zip file containing the associated cert.</p> <p>First we'll request a download token:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/certs/&lt;serial_number&gt;/download/token -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Thu, 02 May 2024 11:46:11 GMT\nContent-Length: 164\n\n{\"token\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTQ2NTA2NzEsImlzcyI6IlVsdHJhdmlvbGV0Iiwic3ViIjoiY2VydHMifQ.4njH2KAz-qxzuaFkVx3WLQNuRTUdoKBTvlbG11oM7Yg\"}\n</code></pre> <p>With the token we can then download the cert. Please note that the token is short lived and must be used before expiry.</p> <pre><code>curl -L -X GET https://prism.ultraviolet.rs/certs/&lt;serial_number&gt;/download -G -d \"token=&lt;download_token&gt;\" --output &lt;filename&gt;.zip\n</code></pre> <p>example:</p> <pre><code>curl -L -X GET https://prism.ultraviolet.rs/certs/75709155906162784911683514578929321876/download -G -d \"token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTQ2NTIzMTYsImlzcyI6IlVsdHJhdmlvbGV0Iiwic3ViIjoiY2VydHMifQ.lvFgVSKAyn2UNeJg1OA4fGxDDZ6pylZTn9UZhrfWR9I\" --output certs.zip\n</code></pre> <p>On the UI we'll click on request download button, followed by download certs to obtain the certs.</p> <p></p> <p></p> <p>This results in three files <code>ca.pem</code>, <code>cert.pem</code> and <code>key.pem</code> which we'll use with CoCo's manager to bring the backend online.</p>"},{"location":"certs/#renew-certificate","title":"Renew Certificate","text":"<p>Certificates can be renewed before they expire. This will move their expiry date to a future one.</p> <p></p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/certs/&lt;serial_number&gt;/renew -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 13:32:31 GMT\nContent-Length: 0\n</code></pre>"},{"location":"certs/#revoke-certificate","title":"Revoke Certificate","text":"<p>Certificates can be revoked, which means they can no longer be used for connecting to backends service. Revoked certificates cannot be renewed.</p> <p></p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/certs/&lt;serial_number&gt;/revoke -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 13:33:29 GMT\nContent-Length: 0\n</code></pre>"},{"location":"certs/#list-certificates","title":"List Certificates","text":"<pre><code>curl -sSiX GET https://prism.ultraviolet.rs/certs -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 13:37:04 GMT\nContent-Length: 269\n\n{\"certificates\":[{\"SerialNumber\":\"26722427430573939575087739124584835231\",\"Certificate\":null,\"Key\":null,\"Revoked\":true,\"ExpiryDate\":\"2024-05-03T13:33:29.405109Z\",\"EntityType\":\"\",\"EntityID\":\"ca219243-0dd4-4e6e-94ad-54fbf3dd8b32\",\"DownloadUrl\":\"\"}],\"total\":1,\"limit\":10}\n</code></pre>"},{"location":"certs/#online-certificate-status-protocal","title":"Online Certificate Status Protocal","text":"<p>The certs service also provides an endpoint on <code>prism.ultraviolet.rs/certs/ocsp</code> which allows verification of certificates issued by this service.</p>"},{"location":"computations/","title":"Computations","text":"<p>The computations service provides a means to manage computations, with functions such as computation creation, update, deletion, and running.</p>"},{"location":"computations/#add-computation","title":"Add Computation","text":"<p>In order to create computation, we can to provide the following content:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"&lt;name&gt;\",\n  \"description\": \"&lt;description&gt;\",\n  \"backend_id\": &lt;backend_id\"\n  ]\n}\nEOF\n</code></pre> <p>On the ui this can be done on this page as shown here </p> <p>Example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"Machine Diagnostics Analysis\",\n  \"description\": \"Performing diagnostics analysis on machine data\",\n  \"backend_id\": \"fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5\",\n  \"agent_config\": {\n    \"log_level\": \"debug\"\n  }\n}\nEOF\n</code></pre> <p>Response:</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nLocation: /computations/240be921-5758-4ffa-9ed3-97e6e72e97ea\nDate: Thu, 02 May 2024 14:29:22 GMT\nContent-Length: 0\n</code></pre>"},{"location":"computations/#retrieve-computations","title":"Retrieve Computations","text":"<p>In order to get all computations:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/computations -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Example:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/computations -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Response:</p> <pre><code>HTTP/2 200\ncontent-type: application/json\ndate: Mon, 27 May 2024 11:37:50 GMT\nx-frame-options: DENY\nx-xss-protection: 1; mode=block\ncontent-length: 433\n\n{\"computations\":[{\"id\":\"f025d311-193a-469b-b504-f137e0b768c2\",\"name\":\"name 1\",\"status\":\"executable\",\"owner\":\"e20aaa5a-95d7-444a-8471-51c67082adbf\",\"start_time\":\"2024-05-27T11:36:42.99242Z\",\"end_time\":\"0001-01-01T00:00:00Z\",\"algorithm\":{},\"agent_config\":{\"log_level\":\"\",\"cert_file\":\"\",\"server_key\":\"\",\"server_ca_file\":\"\",\"client_ca_file\":\"\",\"attested_tls\":false},\"agent_port\":\"\",\"backend_id\":\"cbaf711f-a086-48e0-bea1-a53a9650ba9c\"}]}\n</code></pre> <p>On the UI the listed computations appear so: </p>"},{"location":"computations/#retrieve-computation-information","title":"Retrieve Computation Information","text":"<p>In order to get one specific computation, by ID:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/computations/&lt;computation_id&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Example:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/computations/f025d311-193a-469b-b504-f137e0b768c2 -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Response:</p> <pre><code>HTTP/2 200\ncontent-type: application/json\ndate: Mon, 27 May 2024 11:39:22 GMT\nx-frame-options: DENY\nx-xss-protection: 1; mode=block\ncontent-length: 414\n\n{\"id\":\"f025d311-193a-469b-b504-f137e0b768c2\",\"name\":\"name 1\",\"status\":\"executable\",\"owner\":\"e20aaa5a-95d7-444a-8471-51c67082adbf\",\"start_time\":\"2024-05-27T11:36:42.99242Z\",\"end_time\":\"0001-01-01T00:00:00Z\",\"algorithm\":{},\"agent_config\":{\"log_level\":\"\",\"cert_file\":\"\",\"server_key\":\"\",\"server_ca_file\":\"\",\"client_ca_file\":\"\",\"attested_tls\":false},\"agent_port\":\"\",\"backend_id\":\"cbaf711f-a086-48e0-bea1-a53a9650ba9c\"}\n</code></pre> <p>The view computation page appears as below, it also contains buttons to edit, run, delete and view computation logs and events. </p>"},{"location":"computations/#update-computations-information","title":"Update Computations Information","text":"<p>In order to update computation:</p> <pre><code>curl -sSiX PUT https://prism.ultraviolet.rs/computations/&lt;computation_id&gt; -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"name\": \"[computation_name]\",\n  \"description\": \"[computation_description]\",\n  \"datasets\": [\"[dataset_1]\", \"[dataset_2]\", \"[dataset_3]\"],\n  \"algorithm\": [\"[algorithm_1]\", \"[algorithm_2]\", \"[algorithm_3]\"],\n}\nEOF\n</code></pre> <p>Example:</p> <pre><code>curl -sSiX PUT https://prism.ultraviolet.rs/computations/8b131663-058d-4e8f-8ccb-cc83c3f9e694 -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"name\": \"CNC Machine Diagnostics Analysis\",\n  \"description\": \"Performing diagnostics analysis on CNC machine data\",\n  \"result_consumers\": [\n    \"3ed2a2ad-8251-484c-a39b-bdb82f122f67\",\n    \"622d4b11-1b06-426e-baf6-e80d7025f961\"\n  ]\n}\nEOF\n</code></pre> <p>Response:</p> <pre><code>HTTP/2 200\ncontent-type: application/json\ndate: Mon, 27 May 2024 11:51:25 GMT\nx-frame-options: DENY\nx-xss-protection: 1; mode=block\ncontent-length: 0\n</code></pre> <p>The update computation page appears as below: </p>"},{"location":"computations/#run-computation","title":"Run Computation","text":"<p>In order to get one pspecific computation, by ID:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations/&lt;computation_id&gt;/run -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations/8b131663-058d-4e8f-8ccb-cc83c3f9e694/run -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 08:37:24 GMT\nContent-Length: 0\n</code></pre>"},{"location":"computations/#remove-a-computation","title":"Remove a Computation","text":"<p>In order to delete computation:</p> <pre><code>curl -sSiX DELETE \"https://prism.ultraviolet.rs/computations/&lt;computation_id&gt;\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Example:</p> <pre><code>curl -sSiX DELETE \"https://prism.ultraviolet.rs/computations/8b131663-058d-4e8f-8ccb-cc83c3f9e694\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Response:</p> <pre><code>HTTP/1.1 204 No Content\nContent-Type: application/json\nDate: Thu, 10 Aug 2023 07:34:17 GMT\nX-Frame-Options: DENY\nX-Xss-Protection: 1; mode=block\n</code></pre>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#sign-up","title":"Sign Up","text":"<p>Create a user on the ui as shown below:</p> <p>or using curl as below:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users -H \"Content-Type: application/json\" -d @- &lt;&lt;EOF\n{\n  \"name\": \"John Doe\",\n  \"credentials\": {\n    \"identity\": \"john.doe@example.com\",\n    \"secret\": \"12345678\"\n  }\n}\nEOF\n</code></pre> <p>the response is follows:</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nLocation: /users/b88b42b3-b4a4-4003-a777-6bab443385c9\nDate: Tue, 30 Apr 2024 12:40:32 GMT\nContent-Length: 213\n\n{\"id\":\"b88b42b3-b4a4-4003-a777-6bab443385c9\",\"name\":\"John Doe\",\"credentials\":{\"identity\":\"john.doe@example.com\"},\"created_at\":\"2024-04-30T12:40:32.116252Z\",\"updated_at\":\"0001-01-01T00:00:00Z\",\"status\":\"enabled\"}\n</code></pre> <p>For more user related actions see: magistrala users</p>"},{"location":"getting-started/#login-user","title":"Login User","text":"<p>In order to login user we need to provide username and password:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/tokens/issue -H \"Content-Type: application/json\" -d @- &lt;&lt;EOF\n{\n  \"identity\": \"john.doe@example.com\",\n  \"secret\": \"12345678\"\n}\nEOF\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nDate: Tue, 30 Apr 2024 12:48:18 GMT\nContent-Length: 647\n\n{\"access_token\":\"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJkb21haW4iOiIiLCJleHAiOjE3MTQ0ODQ4OTgsImlhdCI6MTcxNDQ4MTI5OCwiaXNzIjoibWFnaXN0cmFsYS5hdXRoIiwic3ViIjoiIiwidHlwZSI6MCwidXNlciI6IjBkY2UyMmM2LTFhOTQtNGE4ZS1hNzAxLTE4NWE0YzM3ZGY1OCJ9.osXITQXqGHV_aewrnz0bmFzfwIjxMuPZnsSkcYxmJJrNlO9JYEVXrZHLZuS8wejGNUzHur33desq_X3REISBaA\",\"refresh_token\":\"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJkb21haW4iOiIiLCJleHAiOjE3MTQ1Njc2OTgsImlhdCI6MTcxNDQ4MTI5OCwiaXNzIjoibWFnaXN0cmFsYS5hdXRoIiwic3ViIjoiIiwidHlwZSI6MSwidXNlciI6IjBkY2UyMmM2LTFhOTQtNGE4ZS1hNzAxLTE4NWE0YzM3ZGY1OCJ9.KRWH0TTfrORMrjCsfxKw4P6TO4z0Pr3DXilLttwQCiMF6kKy-8sbNz5n2VNjkAIonm-LgIN-qz64l6--a78NjQ\"}\n</code></pre> <p>This can also be done using UI as below: </p>"},{"location":"getting-started/#create-a-project","title":"Create a project","text":"<pre><code>curl -sSiX POST https://prism.ultraviolet.rs/auth/domains/ -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"project 1\",\n  \"alias\": \"proj1\"\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Tue, 30 Apr 2024 13:17:33 GMT\nContent-Length: 235\n\n{\"id\":\"fda88db8-97e1-4560-8db1-29e8a40b5d0c\",\"name\":\"project 1\",\"alias\":\"org1\",\"status\":\"enabled\",\"created_by\":\"0dce22c6-1a94-4a8e-a701-185a4c37df58\",\"created_at\":\"2024-04-30T13:17:32.884558Z\",\"updated_at\":\"0001-01-01T00:00:00Z\"}\n</code></pre> <p>On the ui the steps are as follows:  </p>"},{"location":"getting-started/#project-login","title":"Project Login","text":"<p>To log in to a Project:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/tokens/refresh -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_refresh_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"domain_id\": \"&lt;project_id&gt;\"\n}\nEOF\n</code></pre> <p>Example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/tokens/refresh -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_refresh_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"domain_id\": \"b19c8738-0efa-400e-aaf0-610ef42f1ee1\"\n}\nEOF\n</code></pre> <p>Resopnse:</p> <pre><code>HTTP/1.1 201 Created\nContent-Length: 715\nContent-Type: application/json\nDate: Thu, 10 Aug 2023 07:25:06 GMT\nX-Frame-Options: DENY\nX-Xss-Protection: 1; mode=block\n\n{\n  \"access_token\": \"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTE2NTQxMDYsImlhdCI6MTY5MTY1MjMwNiwiaWRlbnRpdHkiOiJqb2huLmRvZUBleGFtcGxlLmNvbSIsImlzcyI6ImNsaWVudHMuYXV0aCIsInN1YiI6IjFiODQ5YTk5LWNlZjctNDJmNS1hN2Y0LWUwMGIxZjQzOWUwOCIsInR5cGUiOiJhY2Nlc3MifQ.FRaSjJT7wZVPSW6w-O3jyQa9WekLUzp6WcdakrZuvFgTsPvo29tbCNsX71ktJkwKeQUK1CPwRQrWrEu8tAOKFg\",\n  \"refresh_token\": \"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTE3Mzg3MDYsImlhdCI6MTY5MTY1MjMwNiwiaWRlbnRpdHkiOiJqb2huLmRvZUBleGFtcGxlLmNvbSIsImlzcyI6ImNsaWVudHMuYXV0aCIsInN1YiI6IjFiODQ5YTk5LWNlZjctNDJmNS1hN2Y0LWUwMGIxZjQzOWUwOCIsInR5cGUiOiJyZWZyZXNoIn0.iGpKn5FrTknYeuxqIxMd8x40MnExgaUJ1iWJ9Vg5szoShM-M6hu-Q1bNMcZQJoS4wxswGc50JzOjd7JSIYnucg\",\n  \"access_type\": \"Bearer\"\n}\n</code></pre> <p>For the UI click enter to login to Project with will bring you to the dashboard. </p>"},{"location":"getting-started/#backends","title":"Backends","text":"<p>For backends management, on the Backends microservice. This service runs on port <code>9011</code>.</p>"},{"location":"getting-started/#creating-a-backend","title":"Creating a backend","text":"<p>Backends are used to run computations. We need to create one and start it before we are able to create and run a computation.</p> <p></p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/backends/backend -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"my dell server\",\n  \"description\": \"\",\n  \"address\": \"192.168.100.4\"\n}\nEOF\n</code></pre> <p>response</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nLocation: /backends/fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5\nDate: Thu, 02 May 2024 10:15:35 GMT\nContent-Length: 0\n</code></pre>"},{"location":"getting-started/#issuing-a-certificate","title":"Issuing a Certificate","text":"<p>Backends connect via gRPC secured with mTLS. For this we will issue a certificate from certs service.</p> <p></p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/certs/issue/backend/&lt;backend_id&gt; -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"ip_addresses\": []\n}\nEOF\n</code></pre> <p>example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/certs/issue/backend/fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5 -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"ip_addresses\": [\"192.168.100.4\"]\n}\nEOF\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nDate: Thu, 02 May 2024 11:35:37 GMT\nContent-Length: 59\n\n{\"serial_number\":\"75709155906162784911683514578929321876\"}\n</code></pre>"},{"location":"getting-started/#download-certificate","title":"Download Certificate","text":"<p>First we'll request a download token:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/certs/&lt;serial_number&gt;/download/token -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p></p> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Thu, 02 May 2024 11:46:11 GMT\nContent-Length: 164\n\n{\"token\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTQ2NTA2NzEsImlzcyI6IlVsdHJhdmlvbGV0Iiwic3ViIjoiY2VydHMifQ.4njH2KAz-qxzuaFkVx3WLQNuRTUdoKBTvlbG11oM7Yg\"}\n</code></pre> <p>With the token we can then download the cert. Please note that the token is short lived and must be used before expiry.</p> <pre><code>curl -L -X GET https://prism.ultraviolet.rs/certs/&lt;serial_number&gt;/download -G -d \"token=&lt;download_token&gt;\" --output &lt;filename&gt;.zip\n</code></pre> <p>example:</p> <pre><code>curl -L -X GET https://prism.ultraviolet.rs/certs/75709155906162784911683514578929321876/download -G -d \"token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTQ2NTIzMTYsImlzcyI6IlVsdHJhdmlvbGV0Iiwic3ViIjoiY2VydHMifQ.lvFgVSKAyn2UNeJg1OA4fGxDDZ6pylZTn9UZhrfWR9I\" --output certs.zip\n</code></pre> <p></p> <p>This results in three files <code>ca.pem</code>, <code>cert.pem</code> and <code>key.pem</code> which we'll use with CoCo's manager to bring the backend online.</p>"},{"location":"getting-started/#connect-backend","title":"Connect backend","text":"<p>To connect a backend we need to start manager. Follow the getting started guide on cocos to get up to speed. We'll then run manager to connect the backend.</p> <p>example:</p> <pre><code>MANAGER_GRPC_URL=192.168.100.4:7011 MANAGER_LOG_LEVEL=debug MANAGER_QEMU_USE_SUDO=false  MANAGER_QEMU_ENABLE_SEV=false MANAGER_QEMU_SEV_CBITPOS=51 MANAGER_QEMU_OVMF_CODE_FILE=/usr/share/edk2/x64/OVMF_CODE.fd MANAGER_QEMU_OVMF_VARS_FILE=/usr/share/edk2/x64/OVMF_VARS.fd MANAGER_QEMU_ENABLE_SEV_SNP=false MANAGER_GRPC_CLIENT_CERT=cert.pem MANAGER_GRPC_CLIENT_KEY=key.pem MANAGER_GRPC_SERVER_CA_CERTS=ca.pem go run main.go\n</code></pre> <p>Once manager is connected we should notice the associated backend marked as active: This can be viewed by:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/backends/&lt;backend_id&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Thu, 02 May 2024 12:59:15 GMT\nContent-Length: 110\n\n{\"id\":\"fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5\",\"name\":\"my dell server\",\"address\":\"192.168.100.4\",\"active\":true}\n</code></pre> <p></p>"},{"location":"getting-started/#computations","title":"Computations","text":"<p>For computation management, we use Computations micorservice. By default, this service will be running on the port <code>9000</code>.</p>"},{"location":"getting-started/#create-computation","title":"Create Computation","text":"<p>In order to create computation, we can to provide the following content:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"[name]\",\n  \"description\": \"[description]\",\n  \"datasets\": [\n    \"&lt;dataset_1&gt;\", ..., \"[dataset_n]\"\n  ],\n  \"algorithm\": {\"id\":&lt;id&gt;, \"provider\":&lt;provider&gt;, \"hash\":&lt;hash&gt;}\n}\nEOF\n</code></pre> <p>Example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"Machine Diagnostics Analysis\",\n  \"description\": \"Performing diagnostics analysis on machine data\",\n  \"backend_id\": \"fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5\",\n  \"agent_config\": {\n    \"log_level\": \"debug\"\n  }\n}\nEOF\n</code></pre> <p>Response:</p> <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\nLocation: /computations/240be921-5758-4ffa-9ed3-97e6e72e97ea\nDate: Thu, 02 May 2024 14:29:22 GMT\nContent-Length: 0\n</code></pre> <p></p>"},{"location":"getting-started/#run-computation","title":"Run Computation","text":"<p>Next we'll run the computation:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations/&lt;computation_id&gt;/run -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 08:37:24 GMT\nContent-Length: 0\n</code></pre> <p></p> <p>This will result in events and logs from agent and manager visible on the ui. </p>"},{"location":"getting-started/#get-one-computation","title":"Get One Computation","text":"<p>In order to get one specific computation, by ID:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/computations/&lt;computation_id&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>Response:</p> <pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 03 May 2024 09:22:30 GMT\nContent-Length: 872\n\n{\"id\":\"bc31f512-106c-4705-8f6f-a83b58c2f609\",\"name\":\"Machine Diagnostics Analysis\",\"description\":\"Performing diagnostics analysis on machine data\",\"status\":\"executable\",\"start_time\":\"2024-05-02T15:05:30.868972Z\",\"end_time\":\"0001-01-01T00:00:00Z\",\"datasets\":[{\"provider\":\"b88b42b3-b4a4-4003-a777-6bab443385c9\",\"id\":\"Sensor Data Logs\",\"hash\":\"a9a96ff672cde7f6b2badcc4eb13b95afe59255650abfcbd9f73d34fc61480ad\"}],\"algorithm\":{\"provider\":\"b88b42b3-b4a4-4003-a777-6bab443385c9\",\"id\":\"AlgoAI Research Labs\",\"hash\":\"ef501e9225f2c132d75425c32a62bf32588da88494ed5cf73b239f9c02537d86\"},\"result_consumers\":[\"Machine Maintenance Department\",\"Predictive Analytics Team\",\"Industrial Automation Division\"],\"agent_config\":{\"log_level\":\"debug\",\"cert_file\":\"\",\"server_key\":\"\",\"server_ca_file\":\"\",\"client_ca_file\":\"\"},\"agent_port\":\"37721\",\"backend_id\":\"fde3263e-70b8-4ce9-9f3c-4a203a0dcdf5\"}\n</code></pre> <p></p> <p>You should be able to see the agent port which can be used for further computation actions using agent CLI.</p>"},{"location":"policies/","title":"Policies","text":""},{"location":"policies/#computations-policies","title":"Computations Policies","text":""},{"location":"policies/#add-computation-policies","title":"Add Computation Policies","text":"<p>Only admin or the owner of the computation can use <code>/policies</code> endpoint.</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations/policies -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n    \"user\": {\n        \"id\": \"&lt;user_id&gt;\",\n        \"name\": \"&lt;user_name&gt;\"\n    },\n    \"computation\": {\n        \"id\": \"&lt;computation_id&gt;\"\n    },\n    \"roles\": [\"&lt;role&gt;\"]\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/computations/policies -H \"Content-Type: application/json\" -H \"Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJkb21haW4iOiJlYzdmNmI2Mi0zYjBiLTRmNmYtOTI1Zi1jMWYwOWFiMmY4ODMiLCJleHAiOjE3MTY3MjI0NzgsImlhdCI6MTcxNjcxODg3OCwiaXNzIjoibWFnaXN0cmFsYS5hdXRoIiwic3ViIjoiYzI1NTM3ZmQtMzlhZC00YjM2LWIxODAtZTkwZGZiNDc3ZmNkIiwidHlwZSI6MCwidXNlciI6ImMyNTUzN2ZkLTM5YWQtNGIzNi1iMTgwLWU5MGRmYjQ3N2ZjZCJ9.ZTw4F3NlP2ziwRF9bgljDoj73ovRvgNHsbt607Z1vvogFd8yMCguKLhLEVbhPfQ_yIXQYQH8fZdRsxFw0QYKXQ\" -d @- &lt;&lt; EOF\n{\n    \"user\": {\n        \"id\": \"986a04e5-be5b-4041-b649-f64346720219\",\n        \"name\": \"John Doe\"\n    },\n    \"computation\": {\n        \"id\": \"3b273eed-155f-4b56-9408-a29a93cc47b6\"\n    },\n    \"roles\": [\"view\"]\n}\nEOF\n\nHTTP/1.1 201 Created\nContent-Type: application/json\nDate: Thu, 10 Aug 2023 08:20:34 GMT\nContent-Length: 0\n</code></pre> <p>On the UI the steps are as follows:</p> <ol> <li>Login as an administrator/computation owner and click on 'Computations' on the side navigation panel.    </li> <li>Select a computation and click on 'Members'    </li> <li>Click on 'New Computation Policy' button on the top left.    </li> <li>Select the required details and click 'Create'    </li> </ol>"},{"location":"policies/#updating-computation-policies","title":"Updating Computation Policies","text":"<p>The admin or the owner of the computation can update the policy.</p> <pre><code>curl -sSiX PUT https://prism.ultraviolet.rs/computations/policies -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"user\": \"&lt;user_id&gt;\",\n  \"computation\": \"&lt;computation_id&gt;\",\n  \"role\": [\"&lt;role_1&gt;\", ..., \"&lt;role_N&gt;\"]\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX PUT https://prism.ultraviolet.rs/computations/policies -H \"Content-Type: application/json\" -H \"Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJkb21haW4iOiJlYzdmNmI2Mi0zYjBiLTRmNmYtOTI1Zi1jMWYwOWFiMmY4ODMiLCJleHAiOjE3MTY3MjI0NzgsImlhdCI6MTcxNjcxODg3OCwiaXNzIjoibWFnaXN0cmFsYS5hdXRoIiwic3ViIjoiYzI1NTM3ZmQtMzlhZC00YjM2LWIxODAtZTkwZGZiNDc3ZmNkIiwidHlwZSI6MCwidXNlciI6ImMyNTUzN2ZkLTM5YWQtNGIzNi1iMTgwLWU5MGRmYjQ3N2ZjZCJ9.ZTw4F3NlP2ziwRF9bgljDoj73ovRvgNHsbt607Z1vvogFd8yMCguKLhLEVbhPfQ_yIXQYQH8fZdRsxFw0QYKXQ\" -d @- &lt;&lt; EOF\n{\n    \"user\": {\n        \"id\": \"986a04e5-be5b-4041-b649-f64346720219\",\n        \"name\": \"John Doe\"\n    },\n    \"computation\": {\n        \"id\": \"3b273eed-155f-4b56-9408-a29a93cc47b6\"\n    },\n    \"roles\": [\"view\", \"edit\", \"run\"]\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Sun, 26 May 2024 10:56:58 GMT\nContent-Length: 0\n</code></pre> <p>On the UI the steps are as follows:</p> <ol> <li>Login as an administrator/computation owner and click on 'Computations' on the side navigation panel.    </li> <li>Select a computation and click on 'Members'    </li> <li>Click on the edit button on any of the policies to edit.    </li> <li>Select required details and click on 'Update'.    </li> </ol>"},{"location":"policies/#lisiting-computation-policies","title":"Lisiting Computation Policies","text":"<p>As an administrator/computation owner, you can list all the policies in a computation, while as a user you can only list your own policies in a computation.</p> <pre><code>curl -isSX GET https://prism.ultraviolet.rs/computations/policies/&lt;computation_id&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -isSX GET https://prism.ultraviolet.rs/computations/policies/3b273eed-155f-4b56-9408-a29a93cc47b6 -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Sun, 26 May 2024 10:58:24 GMT\nContent-Length: 1785\n\n{\n  \"limit\": 10,\n  \"total\": 6,\n  \"policies\": [\n    {\n      \"owner\": \"\",\n      \"user\": {\n        \"id\": \"f774c854-00f9-4774-b67c-248507c4f8fd\",\n        \"name\": \"Jane Doe\"\n      },\n      \"computation\": {\n        \"id\": \"3b273eed-155f-4b56-9408-a29a93cc47b6\",\n        \"name\": \"C5\"\n      },\n      \"roles\": [\"edit\",\"view\"],\n      \"created_at\": \"0001-01-01T00:00:00Z\",\n      \"updated_at\": \"2024-05-26T10:48:49.111668Z\",\n      \"updated_by\": \"c25537fd-39ad-4b36-b180-e90dfb477fcd\"\n    },\n    ...\n  ]\n}\n</code></pre> <p>On the UI the steps are as follows:</p> <ol> <li>Login and click on 'Computations' on the side navigation panel.    </li> <li>Select a computation and click on 'Members'     </li> </ol>"},{"location":"policies/#delete-computation-policies","title":"Delete Computation Policies","text":"<p>The admin or the owner of the computation can delete the policy.</p> <pre><code>curl -isSX DELETE https://prism.ultraviolet.rs/computations/policies/&lt;user_id&gt;/&lt;computation_id&gt; -H \"Accept: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -isSX DELETE https://prism.ultraviolet.rs/computations/policies/50569d27-060d-42aa-87a8-11b596ef0e68/306d5348-4865-42df-91e3-b292cc94387f -H \"Accept: application/json\" -H \"Authorization: Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJkb21haW4iOiJlYzdmNmI2Mi0zYjBiLTRmNmYtOTI1Zi1jMWYwOWFiMmY4ODMiLCJleHAiOjE3MTY3MjI0NzgsImlhdCI6MTcxNjcxODg3OCwiaXNzIjoibWFnaXN0cmFsYS5hdXRoIiwic3ViIjoiYzI1NTM3ZmQtMzlhZC00YjM2LWIxODAtZTkwZGZiNDc3ZmNkIiwidHlwZSI6MCwidXNlciI6ImMyNTUzN2ZkLTM5YWQtNGIzNi1iMTgwLWU5MGRmYjQ3N2ZjZCJ9.ZTw4F3NlP2ziwRF9bgljDoj73ovRvgNHsbt607Z1vvogFd8yMCguKLhLEVbhPfQ_yIXQYQH8fZdRsxFw0QYKXQ\"\n\nHTTP/1.1 204 No Content\nContent-Type: application/json\nDate: Sun, 26 May 2024 11:05:16 GMT\n</code></pre> <p>On the UI the steps are as follows:</p> <ol> <li>Login as an administrator/computation owner and click on 'Computations' on the side navigation panel.    </li> <li>Select a computation and click on 'Members'    </li> <li>Click on the delete button on any of the policies to delete.    </li> </ol> <p>If you delete policies, the policy will be removed from the policy storage. Further authorization checks related to that policy will fail.</p>"},{"location":"projects/","title":"Projects","text":"<p>Projects represent a consortium of users, computations, and resources that provides a single way to allow management of resources in the system. The projects / projects simplify access control by allowing only users who are in a particular project to access resources which they have been assigned to.</p> <p>Within projects, different users have different roles that allow them to only perform certain operations within the project, such as creation of other users and other admin related tasks. A single user can belong to multiple projects, with which they can have different roles based on the policy assigned.</p> <p>For any user to access the CoCoS system, they must be part of an project, and have to be signed in to the project.</p>"},{"location":"projects/#create-an-project","title":"Create an project","text":"<pre><code>curl -sSiX POST https://prism.ultraviolet.rs/auth/domains/ -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"project 1\",\n  \"alias\": \"org1\"\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/auth/domains/ -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"project 1\",\n  \"alias\": \"org1\"\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Tue, 30 Apr 2024 13:17:33 GMT\nContent-Length: 235\n\n{\n  \"id\":\"fda88db8-97e1-4560-8db1-29e8a40b5d0c\",\n  \"name\":\"project 1\",\n  \"alias\":\"org1\",\n  \"status\":\"enabled\",\n  \"created_by\":\"0dce22c6-1a94-4a8e-a701-185a4c37df58\",\n  \"created_at\":\"2024-04-30T13:17:32.884558Z\",\n  \"updated_at\":\"0001-01-01T00:00:00Z\"\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Log in to prism platform with a user with administrator permission.</li> <li>On successfully log in, projects page is displayed. Click on 'New Project'.    </li> <li>Fill the required fields and click 'Create Project'    </li> </ol>"},{"location":"projects/#update-project","title":"Update project","text":"<p>Update project</p> <pre><code>curl -sSiX PUT https://prism.ultraviolet.rs/auth/domains/&lt;project_id&gt; -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"project 1\",\n  \"alias\": \"org1\"\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/auth/domains/127910df-7eca-42dc-a625-1f8fda70229c -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"project 1\",\n  \"alias\": \"org1\"\n}\nEOF\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 06:28:08 GMT\nContent-Length: 294\n\n{\n  \"id\":\"127910df-7eca-42dc-a625-1f8fda70229c\",\n  \"name\":\"project 1\",\n  \"alias\":\"org1\",\n  \"status\":\"enabled\",\n  \"created_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n  \"created_at\":\"2024-05-24T05:29:47.030197Z\",\n  \"updated_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n  \"updated_at\":\"2024-05-24T06:28:08.121207Z\"\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li> <p>Click on 'Projects' on the navigation panel to view project details.    </p> </li> <li> <p>Click on 'Update Project' to navigate to the update project page.</p> </li> <li>Make necessary changes and click 'update'    </li> </ol>"},{"location":"projects/#get-project","title":"Get project","text":"<pre><code>curl -isSX GET https://prism.ultraviolet.rs/auth/domains/&lt;project_id&gt; -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/auth/domains/127910df-7eca-42dc-a625-1f8fda70229c -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 06:32:29 GMT\nContent-Length: 294\n\n{\n  \"id\":\"127910df-7eca-42dc-a625-1f8fda70229c\",\n  \"name\":\"project 1\",\n  \"alias\":\"org1\",\n  \"status\":\"enabled\",\n  \"created_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n  \"created_at\":\"2024-05-24T05:29:47.030197Z\",\n  \"updated_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n  \"updated_at\":\"2024-05-24T06:28:08.121207Z\"\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Click on 'Projects' on the navigation panel to view project details.    </li> </ol>"},{"location":"projects/#get-projects","title":"Get projects","text":"<p>To paginate the results, use <code>offset</code>, <code>limit</code>, <code>metadata</code>, <code>name</code>, <code>status</code>, <code>parentID</code>, <code>ownerID</code>, <code>tree</code> and <code>dir</code> as query parameters.</p> <pre><code>curl -isSX GET https://prism.ultraviolet.rs/auth/domains/ -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/auth/domains/ -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 06:32:59 GMT\nContent-Length: 898\n\n{\n  \"total\":3,\n  \"offset\":0,\n  \"limit\":10,\n  \"domains\": [\n    {\n      \"id\":\"2c8f3651-eb61-4a2d-8473-a84ae7a94845\",\n      \"name\":\"Test Org2\",\n      \"alias\":\"Desc 2\",\n      \"status\":\"enabled\",\n      \"permission\":\"administrator\",\n      \"created_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n      \"created_at\":\"2024-05-24T05:37:43.870852Z\",\n      \"updated_at\":\"0001-01-01T00:00:00Z\"\n    },\n    {\n      \"id\":\"f5bc07b4-bdc1-426f-8d18-d625bb5da8ac\",\n      \"name\":\"Another Org\",\n      \"alias\":\"Desc 2\",\n      \"status\":\"enabled\",\n      \"permission\":\"administrator\",\n      \"created_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n      \"created_at\":\"2024-05-24T05:47:32.275316Z\",\n      \"updated_at\":\"0001-01-01T00:00:00Z\"\n    },\n    {\"id\":\"127910df-7eca-42dc-a625-1f8fda70229c\",\n    \"name\":\"project 1\",\n    \"alias\":\"org1\",\n    \"status\":\"enabled\",\n    \"permission\":\"administrator\",\n    \"created_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n    \"created_at\":\"2024-05-24T05:29:47.030197Z\",\n    \"updated_by\":\"c7a1374c-b6e1-4cfd-b333-696bec0c672d\",\n    \"updated_at\":\"2024-05-24T06:28:08.121207Z\"\n    }\n  ]\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Click on user profile at the top right, then click on \"Projects\" on the menu. This navigates to the projects page.    </li> <li>Project page is displayed.    </li> </ol>"},{"location":"projects/#assign","title":"Assign","text":"<p>Assign user to an project</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/auth/domains/&lt;project_id&gt;/members -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"subject\": \"&lt;user_id&gt;\",\n  \"object\": \"&lt;project_id&gt;\",\n  \"relation\": [\"&lt;relations&gt;\"]\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/auth/domains/127910df-7eca-42dc-a625-1f8fda70229c/users/assign -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"relation\": \"member\",\n  \"user_ids\": [\"1470462e-70d3-4e3f-82d8-7df5ad643de3\"]\n}\nEOF\n\nHTTP/1.1 201 Created\nContent-Type: application/json\nDate: Fri, 24 May 2024 06:51:37 GMT\nContent-Length: 0\n\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li> <p>From Project details page, click on 'Members'. This navigates to Members page.    </p> </li> <li> <p>From Member page, click on 'Assign Member'. A modal dialog will appear that allowing member relation assignment.    </p> </li> </ol>"},{"location":"projects/#members","title":"Members","text":"<p>To paginate the results, use <code>offset</code>, <code>limit</code>, <code>metadata</code>, <code>name</code>, <code>status</code>, <code>parentID</code>, <code>ownerID</code>, <code>tree</code> and <code>dir</code> as query parameters.</p> <p>Must take into consideration the user identified by the <code>user_token</code> needs to be assigned to the same project identified by <code>group_id</code> with <code>g_list</code> action or be the owner of the project identified by <code>group_id</code>.</p> <pre><code>curl -isSX GET https://prism.ultraviolet.rs/auth/domains/&lt;project_id&gt;/users -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code> curl -sSiX GET https://prism.ultraviolet.rs/auth/domains/ec7f6b62-3b0b-4f6f-925f-c1f09ab2f883/users\\?permission\\=view -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Sat, 25 May 2024 08:44:49 GMT\nContent-Length: 216\n\n{\n  \"limit\":10,\n  \"offset\":0,\n  \"total\":1,\n  \"users\": [\n    {\n      \"id\":\"986a04e5-be5b-4041-b649-f64346720219\",\n      \"name\":\"John Doe\",\n      \"credentials\":{},\n      \"created_at\":\"0001-01-01T00:00:00Z\",\n      \"updated_at\":\"0001-01-01T00:00:00Z\",\n      \"status\":\"enabled\"\n    }\n  ]\n}\n</code></pre> <p>On the ui steps are as follows: On the ui, steps are as follows:</p> <ol> <li>From Project details page, click on 'Members'. This navigates to Members page.    </li> <li>Project members page is displayed.    </li> </ol>"},{"location":"ui/","title":"UI","text":"<p>The Prism UI gives is the easiest way to use the CoCoS system, giving the ability to use the entire prism system without interacting with the command line. It provides a convenient way to log in to the CoCoS system, creation of users, projects, computations, computation policies, computation invitations, certs, backends, project billing and updating of all this information.</p>"},{"location":"ui/#getting-started","title":"Getting Started","text":"<p>The UI can be found at https://prism.ultraviolet.rs. The UI is a web application and can be accessed from any modern web browser. Currently, the source code is not available for the UI, but it is planned to be open sourced in the future.</p>"},{"location":"ui/#login-and-registration","title":"Login and Registration","text":"<p>A default user is created when the CoCoS system is installed. The default user is <code>admin</code>, with email <code>admin@example.com</code> and the password is <code>12345678</code>. This user can be used to log in to the UI. Once logged in, the user can change their password and create new users. The next layer of security is the project, which is a collection of users. The user can create a new project and invite other users to join the project. Prior to accessing the CoCoS system, the user must be a part of an project.</p> <p>A user can also register an account by clicking the Register button which prompts the user for a username, email, and password. After which, the user is free to create projects and manage their created sysem.</p> <p>The projects page gives the user the ability to either create an entirely new project or join an existing project. The user can also view the projects they are a part of and the projects they have created.</p> <p></p>"},{"location":"ui/#projects","title":"Projects","text":"<p>The projects page gives the user the ability to create new projects. The user can also view the projects they are a part of and the projects they have created. The user can also update the information of the projects they have created. The project page also includes a members tab, which shows the users that are a part of the project. On this tab, the project owner can also invite new users to join the project and assign different roles to the different users that have been assigned to the project.</p> <p></p>"},{"location":"ui/#users","title":"Users","text":"<p>The users page gives the user the ability to create new users. The user can also view the users they have created and the users that are a part of the project they are in. The user can also update the information of the users they have created.</p> <p></p>"},{"location":"ui/#computations","title":"Computations","text":"<p>The computations page gives the user the ability to create new computations. The user can also view the computations they have created and the computations that are a part of the project they are in. The user can also update the information of the computations they have created. On the computations page, the computation admin has the ability to invite other users into the computation. Once a user is invited to the computation, they are required to provide their public certificate for them to be able to run the computation.</p> <p></p> <p>On the computations page, the user has the ability to view invitations that have been sent to them and either accept or reject the invitation. The computation admin also has the ability to view the users that are a part of the computation and the roles that have been assigned to the different users.</p>"},{"location":"ui/#computation-policies","title":"Computation Policies","text":"<p>The computation policies page gives the user the ability to create new computation policies. The user can also view the computation policies they have created and the computation policies that are a part of the project they are in. The user can also update the information of the computation policies they have created. A computation policy is used to determine the roles that are assigned to the different users that are a part of the computation, such as editor, viewer, or admin.</p> <p></p>"},{"location":"ui/#billing","title":"Billing","text":"<p>Billing service allows the project and users to pay for the services they use. The first step in billing is to create a billing customer, which you create as the first step when you access the project settings page.</p> <p></p> <p>Once the customer is created, the user can select one of the plans created by the admin and subscribe to it. This leads the user to the payment page, where the user can enter their credit card details and subscribe to the plan.</p> <p></p> <p>Once selected, the user will be prompted to make the payment. Once the payment is successful, the user will be subscribed to the plan and the billing will be active.</p> <p></p>"},{"location":"users/","title":"Users","text":""},{"location":"users/#create-user","title":"Create User","text":"<p>Identity, which can be email-address (this must be unique as it identifies the user) and secret (password must contain at least 8 characters)</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users -H \"Content-Type: application/json\" [-H \"Authorization: Bearer &lt;user_token&gt;\"] -d @- &lt;&lt;EOF\n{\n  \"name\": \"[name]\",\n  \"credentials\": {\n    \"identity\": \"&lt;identity&gt;\",\n    \"secret\": \"&lt;secret&gt;\"\n  },\n  \"tags\": [\n    \"[tag_1]\", ..., \"[tag_N]\"\n  ],\n  \"owner\": \"[owner_id]\",\n  \"metadata\": {},\n  \"status\": \"[status]\",\n  \"role\": \"[role]\"\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt; EOF\n{\n  \"name\": \"[John Doe]\",\n  \"credentials\": {\n    \"identity\": \"john.doe@email.com\",\n    \"secret\": \"12345678\"\n  }\n}\nEOF\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: /users/e6c6b6dd-8fb0-4ea6-ae7d-118424ce0006\nDate: Fri, 24 May 2024 07:28:32 GMT\nContent-Length: 212\n\n{\n  \"id\":\"e6c6b6dd-8fb0-4ea6-ae7d-118424ce0006\",\n  \"name\":\"[John Doe]\",\n  \"credentials\": {\"identity\":\"john.doe@email.com\"},\n  \"created_at\":\"2024-05-24T07:28:32.449035Z\",\n  \"updated_at\":\"0001-01-01T00:00:00Z\",\n  \"status\":\"enabled\"\n}\n</code></pre> <p>You can also use <code>&lt;user_token&gt;</code> so that the owner of the new user is the one identified by the <code>&lt;user_token&gt;</code> for example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"name\": \"[John Doe]\",\n  \"credentials\": {\n    \"identity\": \"john.doe@email.com\",\n    \"secret\": \"12345678\"\n  }\n}\nEOF\n\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: /users/75db22d5-7925-4e90-8ffb-919c6fa2d8c2\nDate: Fri, 24 May 2024 07:31:18 GMT\nContent-Length: 215\n\n{\n  \"id\": \"47887629-7b4c-4bf5-b414-35bb2a5f5f23\",\n  \"name\": \"John Doe\",\n  \"owner\": \"11a2a5ba-723a-4b6d-8a5d-0c679efbf283\",\n  \"credentials\": { \"identity\": \"john.doe@email.com\" },\n  \"created_at\": \"2023-08-10T07:55:08.056426Z\",\n  \"updated_at\": \"0001-01-01T00:00:00Z\",\n  \"status\": \"enabled\"\n}\n</code></pre>"},{"location":"users/#create-token","title":"Create Token","text":"<p>To log in to the Mainflux system, you need to create a <code>user_token</code>.</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/tokens/issue -H \"Content-Type: application/json\" -d @- &lt;&lt;EOF\n{\n  \"identity\": \"&lt;user_identity&gt;\",\n  \"secret\": \"&lt;user_secret&gt;\"\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/tokens/issue -H \"Content-Type: application/json\" -d @- &lt;&lt;EOF\n{\n  \"identity\": \"johndoe@email.com\",\n  \"secret\": \"12345678\"\n}\nEOF\n\nHTTP/1.1 201 Created\nContent-Type: application/json\nDate: Fri, 24 May 2024 07:36:20 GMT\nContent-Length: 591\n\n{\n  \"access_token\":\"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTY1Mzk3ODAsImlhdCI6MTcxNjUzNjE4MCwiaXNzIjoibWFnaXN0cmFsYS5hdXRoIiwidHlwZSI6MCwidXNlciI6ImU2YzZiNmRkLThmYjAtNGVhNi1hZTdkLTExODQyNGNlMDAwNiJ9.QWX7IBCWLOcWaerOkZ0XAQlOq-jLEgqXttP4S1qEooky-LWeAMHBHKszjR7LoaVoCBcmuqbuKL0vrgNV25OPfg\",\n  \"refresh_token\":\"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MTY2MjI1ODAsImlhdCI6MTcxNjUzNjE4MCwiaXNzIjoibWFnaXN0cmFsYS5hdXRoIiwidHlwZSI6MSwidXNlciI6ImU2YzZiNmRkLThmYjAtNGVhNi1hZTdkLTExODQyNGNlMDAwNiJ9.Wl9lc5Mx9Tu-LVFoBg5StNi7s730r0vPSiSvapsW8IgL1jIEPRyvNxEaxbPSYxxK8xB61NNnkkPVxoPVhSKk_g\"\n}\n\n</code></pre>"},{"location":"users/#refresh-token","title":"Refresh Token","text":"<p>To issue another <code>access_token</code> after getting expired, you need to use a <code>refresh_token</code>.</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/tokens/refresh -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;refresh_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/tokens/refresh -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;refresh_token&gt;\"\n\n\nHTTP/1.1 201 Created\nContent-Length: 709\nContent-Type: application/json\nDate: Thu, 10 Aug 2023 07:55:20 GMT\nX-Frame-Options: DENY\nX-Xss-Protection: 1; mode=block\n\n{\n  \"access_token\": \"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTE2NTQ4NDAsImlhdCI6MTY5MTY1MzA0MCwiaWRlbnRpdHkiOiJqb2huLmRvZUBlbWFpbC5jb20iLCJpc3MiOiJjbGllbnRzLmF1dGgiLCJzdWIiOiIyNDZhY2VlOC0wYmM0LTRiMmUtOWYyYy0zZmRlZTM3NzZkNDUiLCJ0eXBlIjoiYWNjZXNzIn0.Sn4r41hl1pBFjm95UCr23hGabgq62cxNV882EiV8RMZqv92RJYMcm27KFCcR6fN07jMTXFVr_DDxc9be1HAXgw\",\n  \"refresh_token\": \"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTE3Mzk0NDAsImlhdCI6MTY5MTY1MzA0MCwiaWRlbnRpdHkiOiJqb2huLmRvZUBlbWFpbC5jb20iLCJpc3MiOiJjbGllbnRzLmF1dGgiLCJzdWIiOiIyNDZhY2VlOC0wYmM0LTRiMmUtOWYyYy0zZmRlZTM3NzZkNDUiLCJ0eXBlIjoicmVmcmVzaCJ9.As2C8mCp2BaSdm5yp5OUMNiJ7gHJT472e-L7T80xVHhrqDMBvsom7o4_RfP1z7A2sHrkA4ozU4B-FUSaSeG32A\",\n  \"access_type\": \"Bearer\"\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Click 'Users' on the navigation panel to display Users page. Then click 'New User' at the top right.    </li> <li>Fill in the required fields on the Create User page. Once done click 'Create User'.    </li> </ol>"},{"location":"users/#get-user-profile","title":"Get User Profile","text":"<pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users/profile -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users/profile -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 07:43:00 GMT\nContent-Length: 212\n\n{\n  \"id\":\"e6c6b6dd-8fb0-4ea6-ae7d-118424ce0006\",\n  \"name\":\"[John Doe]\",\n  \"credentials\":{\"identity\":\"john.doe@email.com\"},\n  \"created_at\":\"2024-05-24T07:28:32.449035Z\",\n  \"updated_at\":\"0001-01-01T00:00:00Z\",\n  \"status\":\"enabled\"\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Click on user profile at the top right.    </li> </ol>"},{"location":"users/#get-user","title":"Get User","text":"<pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users/&lt;user_id&gt; -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 07:49:09 GMT\nContent-Length: 1087\n\n{\n  \"limit\":10,\n  \"offset\":0,\n  \"total\":6,\n  \"users\": [\n    {\n      \"id\":\"71e3d691-08a4-49ad-9cdf-69fd87103ca1\",\n      \"name\":\"John Doe\",\n      \"credentials\":{},\n      \"created_at\":\"0001-01-01T00:00:00Z\",\n      \"updated_at\":\"0001-01-01T00:00:00Z\",\n      \"status\":\"enabled\"\n    },\n    {\"id\":\"3b6461ff-17f2-4b4e-aff3-c3cde9542087\",\n    \"name\":\"Jane Doe\",\n    \"credentials\":{},\n    \"created_at\":\"0001-01-01T00:00:00Z\",\n    \"updated_at\":\"0001-01-01T00:00:00Z\",\n    \"status\":\"enabled\"\n    },\n    ...\n  ]\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Click 'Users' on the navigation panel to display Users page. Then click a user name from the list of users. This navigates to User Details page.     </li> </ol>"},{"location":"users/#get-users","title":"Get Users","text":"<p>You can get all users in the database by querying <code>/users</code> endpoint.</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 07:49:09 GMT\nContent-Length: 1087\n\n{\n  \"limit\":10,\n  \"offset\":0,\n  \"total\":6,\n  \"users\": [\n    {\n      \"id\":\"71e3d691-08a4-49ad-9cdf-69fd87103ca1\",\n      \"name\":\"John Doe\",\n      \"credentials\":{},\n      \"created_at\":\"0001-01-01T00:00:00Z\",\n      \"updated_at\":\"0001-01-01T00:00:00Z\",\n      \"status\":\"enabled\"\n    },\n    {\"id\":\"3b6461ff-17f2-4b4e-aff3-c3cde9542087\",\n    \"name\":\"Jane Doe\",\n    \"credentials\":{},\n    \"created_at\":\"0001-01-01T00:00:00Z\",\n    \"updated_at\":\"0001-01-01T00:00:00Z\",\n    \"status\":\"enabled\"\n    },\n    ...\n  ]\n}\n</code></pre> <p>To paginate the results, use <code>offset</code>, <code>limit</code>, <code>metadata</code>, <code>name</code>, <code>identity</code>, <code>tag</code>, <code>status</code> and <code>visbility</code> as query parameters.</p> <pre><code>curl -sSiX GET -H \"Authorization: Bearer &lt;user_token&gt;\" https://prism.ultraviolet.rs/users?offset=[offset]&amp;limit=[limit]&amp;identity=[identity]\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX GET -H \"Authorization: Bearer &lt;user_token&gt;\" https://prism.ultraviolet.rs/users\\?offset\\=0\\&amp;limit\\=5\\&amp;identity\\=john.doe2@email.com\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 07:53:33 GMT\nContent-Length: 44\n\n{\"limit\":5,\"offset\":0,\"total\":0,\"users\":[]}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Click 'Users' on the navigation panel to display Users page. Then click a user name from the list of users. This navigates to User Details page.    </li> </ol>"},{"location":"users/#update-user","title":"Update User","text":"<p>Updating user's name and/or metadata</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/&lt;user_id&gt; -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"name\": \"[name]\",\n  \"metadata\": {}\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/5364b2fb-12f9-41dc-b6ac-fa08bb556897 -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"name\": \"new name\",\n  \"metadata\": {\n    \"department\": \"confidential-computing\"\n  }\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 12:15:07 GMT\nContent-Length: 391\n\n{\n  \"id\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"name\":\"new name\",\n  \"credentials\":{\"identity\":\"johndoe@email.com\",\"secret\":\"$2a$10$B8aAupFDq7gPFcv4LCrv/e2ZrFsURD4aZgC0cWSCsdVAbB.Zj9FD6\"},\n  \"metadata\":{\"department\":\"confidential-computing\"},\n  \"created_at\":\"2024-05-24T09:28:44.418931Z\",\n  \"updated_at\":\"2024-05-24T12:15:07.806592Z\",\n  \"updated_by\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"status\":\"enabled\"\n}\n</code></pre> <p>On the ui the steps are as follows:</p> <ol> <li>Click 'Users' on the navigation panel to display Users page. Then click a user name from the list of users. This navigates to User Details page.    </li> <li>Click 'Update User'.    </li> <li>Update the required fields and click 'Update' to submit the details.    </li> </ol>"},{"location":"users/#update-user-tags","title":"Update User Tags","text":"<p>Updating user's tags</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/&lt;user_id&gt;/tags -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"tags\": [\"&lt;tag_1&gt;\", ..., \"tag_N\"]\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/5364b2fb-12f9-41dc-b6ac-fa08bb556897/tags -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"tags\": [\"manager\", \"developer\"]\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 12:17:01 GMT\nContent-Length: 350\n\n{\n  \"id\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"name\":\"new name\",\n  \"tags\":[\"manager\",\"developer\"],\n  \"credentials\":{\"identity\":\"johndoe@email.com\"},\n  \"metadata\":{\"department\":\"confidential-computing\"},\n  \"created_at\":\"2024-05-24T09:28:44.418931Z\",\n  \"updated_at\":\"2024-05-24T12:17:01.607854Z\",\n  \"updated_by\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"status\":\"enabled\"\n}\n</code></pre>"},{"location":"users/#update-user-owner","title":"Update User Owner","text":"<p>Updating user's owner</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/&lt;user_id&gt;/owner -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"owner\": \"&lt;owner_id&gt;\"\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/secret -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"owner\": \"532311a4-c13b-4061-b991-98dcae7a934e\"\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 12:41:06 GMT\nContent-Length: 353\n\n{\n  \"id\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"name\":\"new name\",\n  \"tags\":[\"manager\",\"developer\"],\n  \"credentials\":{\"identity\":\"jane.doe@example.com\"},\n  \"metadata\":{\"department\":\"confidential-computing\"},\n  \"created_at\":\"2024-05-24T09:28:44.418931Z\",\n  \"updated_at\":\"2024-05-24T12:41:06.062947Z\",\n  \"updated_by\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"status\":\"enabled\"\n}\n</code></pre>"},{"location":"users/#update-user-identity","title":"Update User Identity","text":"<p>Updating user's identity</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/&lt;user_id&gt;/identity -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"identity\": \"&lt;identity&gt;\"\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/secret -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"identity\": \"jane.doe2@email.com\"\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 12:41:06 GMT\nContent-Length: 353\n\n{\n  \"id\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"name\":\"new name\",\n  \"tags\":[\"manager\",\"developer\"],\n  \"credentials\":{\"identity\":\"jane.doe2@email.com\"},\n  \"metadata\":{\"department\":\"confidential-computing\"},\n  \"created_at\":\"2024-05-24T09:28:44.418931Z\",\n  \"updated_at\":\"2024-05-24T12:41:06.062947Z\",\n  \"updated_by\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"status\":\"enabled\"\n}\n</code></pre>"},{"location":"users/#change-secret","title":"Change Secret","text":"<p>Changing the user secret can be done by calling the update secret function</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/secret -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"old_secret\": \"&lt;old_secret&gt;\",\n  \"new_secret\": \"&lt;new_secret&gt;\"\n}\nEOF\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX PATCH https://prism.ultraviolet.rs/users/secret -H \"Content-Type: application/json\" -H \"Authorization: Bearer &lt;user_token&gt;\" -d @- &lt;&lt;EOF\n{\n  \"old_secret\": \"12345678\",\n  \"new_secret\": \"123456789\"\n}\nEOF\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 12:41:06 GMT\nContent-Length: 353\n\n{\n  \"id\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"name\":\"new name\",\n  \"tags\":[\"manager\",\"developer\"],\n  \"credentials\":{\"identity\":\"jane.doe@example.com\"},\n  \"metadata\":{\"department\":\"confidential-computing\"},\n  \"created_at\":\"2024-05-24T09:28:44.418931Z\",\n  \"updated_at\":\"2024-05-24T12:41:06.062947Z\",\n  \"updated_by\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"status\":\"enabled\"\n}\n</code></pre>"},{"location":"users/#enable-user","title":"Enable User","text":"<p>Changing the user status to enabled can be done by calling the enable user function</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users/&lt;user_id&gt;/enable -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/11a2a5ba-723a-4b6d-8a5d-0c679efbf283/enable -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 12:47:06 GMT\nContent-Length: 353\n\n{\n  \"id\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"name\":\"new name\",\n  \"tags\":[\"manager\",\"developer\"],\n  \"credentials\": {\"identity\":\"jane.doe@example.com\"},\n  \"metadata\": {\"department\":\"confidential-computing\"},\n  \"created_at\":\"2024-05-24T09:28:44.418931Z\",\n  \"updated_at\":\"2024-05-24T12:47:06.062947Z\",\n  \"updated_by\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"status\":\"enabled\"\n}\n</code></pre>"},{"location":"users/#disable-user","title":"Disable User","text":"<p>Changing the user status to disabled can be done by calling the disable user function</p> <pre><code>curl -sSiX GET https://prism.ultraviolet.rs/users/&lt;user_id&gt;/disable -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code>curl -sSiX POST https://prism.ultraviolet.rs/users/11a2a5ba-723a-4b6d-8a5d-0c679efbf283/disable -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Fri, 24 May 2024 12:58:02 GMT\nContent-Length: 353\n\n{\n  \"id\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"name\":\"new name\",\n  \"tags\":[\"manager\",\"developer\"],\n  \"credentials\":{\"identity\":\"jane.doe@example.com\"},\n  \"metadata\":{\"department\":\"confidential-computing\"},\n  \"created_at\":\"2024-05-24T09:28:44.418931Z\",\n  \"updated_at\":\"2024-05-24T12:58:02.062947Z\",\n  \"updated_by\":\"5364b2fb-12f9-41dc-b6ac-fa08bb556897\",\n  \"status\":\"disabled\"\n}\n</code></pre>"},{"location":"users/#get-user-memberships","title":"Get User Memberships","text":"<p>You can get all groups a user is assigned to by calling the get user memberships function.</p> <p>To paginate the results, use <code>offset</code>, <code>limit</code>, <code>metadata</code>, <code>name</code>, <code>status</code>, <code>parentID</code>, <code>ownerID</code>, <code>tree</code> and <code>dir</code> as query parameters.</p> <p>Must take into consideration the user identified by the <code>user_token</code> needs to be assigned to the same group with <code>c_list</code> action or is the owner of the user identified by the <code>user_id</code>.</p> <pre><code>curl -sSiX GET GET https://prism.ultraviolet.rs/domains  -H \"Authorization: Bearer &lt;user_token&gt;\"\n</code></pre> <p>For example:</p> <pre><code> curl -sSiX GET https://prism.ultraviolet.rs/domains  -H \"Authorization: Bearer &lt;user_token&gt;\"\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Sat, 25 May 2024 09:09:58 GMT\nContent-Length: 304\n\n{\n  \"total\":1,\"offset\":0,\n  \"limit\":10,\n  \"domains\": [\n    {\n      \"id\":\"ec7f6b62-3b0b-4f6f-925f-c1f09ab2f883\",\n      \"name\":\"Test Org\",\n      \"alias\":\"Desc\",\n      \"status\":\"enabled\",\n      \"permission\":\"viewer\",\n      \"created_by\":\"c25537fd-39ad-4b36-b180-e90dfb477fcd\",\n      \"created_at\":\"2024-05-24T14:35:30.891544Z\",\n      \"updated_at\":\"0001-01-01T00:00:00Z\"\n    }\n  ]\n}\n</code></pre>"}]}